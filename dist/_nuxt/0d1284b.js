(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{473:function(t,r,e){var content=e(514);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(32).default)("6cff6180",content,!0,{sourceMap:!1})},513:function(t,r,e){"use strict";e(473)},514:function(t,r,e){var n=e(31)(!1);n.push([t.i,".board[data-v-68244831]{padding:12px;height:100vh;overflow:scroll}.board .list[data-v-68244831]{min-width:250px;padding:25px;border-radius:12px;min-height:70vh}.board .create-list[data-v-68244831],.board .list[data-v-68244831]{background-color:hsla(0,0%,89.4%,.35)}.board a[data-v-68244831]{text-decoration:none}.board .menu-items a[data-v-68244831]{color:#2e2e2e;padding:10px 0 10px 3px;font-size:24px}.board .jello-topbar[data-v-68244831]{background-color:hsla(0,0%,100%,0);padding:0!important}",""]),t.exports=n},539:function(t,r,e){"use strict";e.r(r);e(49),e(9),e(34),e(65),e(22),e(15),e(64),e(71),e(23);var n=e(7),o=(e(367),e(39),e(544));function d(t,r){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,r){if(!t)return;if("string"==typeof t)return c(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c(t,r)}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,d=!0,l=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return d=t.done,t},e:function(t){l=!0,o=t},f:function(){try{d||null==e.return||e.return()}finally{if(l)throw o}}}}function c(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,e=new Array(r);i<r;i++)e[i]=t[i];return e}var l={layout:"board",data:function(){return{listId:"",list:{title:""},card:{title:""},currentCard:{},cardDraggedId:"",cardDraggedListId:"",dialog:!1,dialogCard:!1,dialogEditCard:!1,drawer:!1}},asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function r(){var e,n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=t.params,n=$nuxt.$fire.firestore.collection("users").doc($nuxt.$fire.auth.currentUser.uid).collection("boards").doc(e.id),o={},r.next=5,n.get().then((function(t){t.exists&&((o=t.data()).id=e.id)})).catch((function(t){}));case 5:return r.abrupt("return",{board:o});case 6:case"end":return r.stop()}}),r)})))()},created:function(){var t=this,r=this.board.id;$nuxt.$fire.firestore.collection("users").doc($nuxt.$fire.auth.currentUser.uid).collection("boards").doc(r).onSnapshot((function(e){e.exists&&(t.board=e.data(),t.board.id=r)}))},methods:{createList:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((e=t).dialog=!1,""==e.list.title){r.next=10;break}return e.list.id=Object(o.a)(),e.list.cards=[],e.list.dateCreated=Date.now(),e.board.lists||(e.board.lists=[]),e.board.lists.push(e.list),r.next=9,e.updateBoard();case 9:e.list={};case 10:case"end":return r.stop()}}),r)})))()},updateCardList:function(t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var n,o,c,l,v,f,x,m,h,C,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=-1,c=-1,l=-1,v=0,f=0,x=d((n=r).board.lists);try{for(x.s();!(m=x.n()).done;){if((h=m.value).id===t&&(l=v),n.currentCard.listId===h.id){o=v,C=d(h.cards);try{for(C.s();!(_=C.n()).done;)_.value.id===n.currentCard.id&&(c=f),f++}catch(t){C.e(t)}finally{C.f()}}v++}}catch(t){x.e(t)}finally{x.f()}return n.board.lists[o].cards.splice(c,1),n.currentCard.listId=t,n.board.lists[l].cards.push(n.currentCard),e.next=13,n.updateBoard();case 13:case"end":return e.stop()}}),e)})))()},allowDrop:function(t){t.preventDefault()},drag:function(t,r){this.currentCard=r},drop:function(t,r){t.preventDefault(),this.updateCardList(r)},deleteList:function(t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var n,o,c,l,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=-1,c=0,l=d((n=r).board.lists);try{for(l.s();!(v=l.n()).done;)v.value.id==t&&(o=c),c++}catch(t){l.e(t)}finally{l.f()}if(!(o>-1)){e.next=9;break}return n.board.lists.splice(o,1),e.next=9,n.updateBoard();case 9:case"end":return e.stop()}}),e)})))()},createCard:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var e,n,c,l,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((e=t).dialogCard=!1,""==e.card.title){r.next=11;break}if(e.card.id=Object(o.a)(),e.card.dateCreated=Date.now(),e.card.listId=e.listId,e.board.lists){n=-1,c=0,l=d(e.board.lists);try{for(l.s();!(v=l.n()).done;)v.value.id===e.listId&&(n=c),c++}catch(t){l.e(t)}finally{l.f()}-1!=n&&(e.board.lists[n].cards||(e.board.lists[n].cards=[]),e.board.lists[n].cards.push(e.card))}return r.next=9,e.updateBoard();case 9:e.card={},e.listId="";case 11:case"end":return r.stop()}}),r)})))()},editCard:function(t){this.dialogEditCard=!0,this.currentCard=t},updateCard:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var e,n,o,c,l,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(e=t).dialogEditCard=!1,n=d(e.board.lists);try{for(n.s();!(o=n.n()).done;)if(c=o.value,e.currentCard.listId===c.id){l=d(c.cards);try{for(l.s();!(v=l.n()).done;)v.value.id===e.currentCard.id&&e.currentCard}catch(t){l.e(t)}finally{l.f()}}}catch(t){n.e(t)}finally{n.f()}return r.next=6,e.updateBoard();case 6:case"end":return r.stop()}}),r)})))()},deleteCard:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var e,i,n,o,c,l,v,f,x;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(e=t).dialogEditCard=!1,i=0,n=0,o={list:-1,card:-1},c=d(e.board.lists);try{for(c.s();!(l=c.n()).done;){if(v=l.value,e.currentCard.listId===v.id){f=d(v.cards);try{for(f.s();!(x=f.n()).done;)x.value.id===e.currentCard.id&&(o.list=i,o.card=n),n++}catch(t){f.e(t)}finally{f.f()}}i++}}catch(t){c.e(t)}finally{c.f()}if(!(o.list>-1)){r.next=11;break}return e.board.lists[o.list].cards.splice(o.card,1),r.next=11,e.updateBoard();case 11:case"end":return r.stop()}}),r)})))()},deleteBoard:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=t,r.prev=1,r.next=4,e.$fire.firestore.collection("users").doc(e.$fire.auth.currentUser.uid).collection("boards").doc(e.board.id).delete().then((function(){$nuxt.$router.push("/")})).catch((function(){}));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),$nuxt.$router.push("/");case 9:case"end":return r.stop()}}),r,null,[[1,6]])})))()},updateBoard:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=t,r.next=3,e.$fire.firestore.collection("users").doc(e.$fire.auth.currentUser.uid).collection("boards").doc(e.board.id).update(e.board,{merge:!0});case 3:case"end":return r.stop()}}),r)})))()}}},v=(e(513),e(54)),f=e(67),x=e.n(f),m=e(480),h=e(471),C=e(452),_=e(448),w=e(451),k=e(537),y=e(440),j=e(450),$=e(449),R=(e(369),e(2)),I=Object(R.h)("spacer","div","v-spacer"),O=e(543),component=Object(v.a)(l,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"d-flex flex-column board",style:""!=t.board.image.downloadURL?"background:url("+t.board.image.downloadURL+");background-size:cover;":t.board.color?"background-color:"+t.board.color:""},[e("div",{staticClass:"d-block"},[e("v-container",{staticClass:"jello-topbar",attrs:{fluid:""}},[e("div",{staticClass:"d-flex justify-space-between"},[e("v-icon",{on:{click:function(r){t.drawer=!0}}},[t._v("mdi-menu")]),t._v(" "),e("nuxt-link",{attrs:{to:"/"}},[e("v-row",{attrs:{"no-gutters":"",align:"center",justify:"space-between"}},[e("h3",{staticClass:"logo"},[t._v("Jello")])])],1),t._v(" "),e("v-icon",{attrs:{small:""},on:{click:function(r){return t.deleteBoard()}}},[t._v("mdi-delete-outline")])],1)]),t._v(" "),e("v-navigation-drawer",{staticClass:"d-block px-3 py-3",attrs:{fixed:"",left:""},model:{value:t.drawer,callback:function(r){t.drawer=r},expression:"drawer"}},[e("v-container",{staticClass:"jello-topbar",attrs:{fluid:""}},[e("v-row",{attrs:{"no-gutters":"",align:"center",justify:"space-between"}},[e("v-icon",{on:{click:function(r){t.drawer=!1}}},[t._v("mdi-close")]),t._v(" "),e("v-row",{attrs:{"no-gutters":"",align:"center",justify:"end"}},[e("p",{staticClass:"jello-user"},[t._v("\n              Signed in as"),e("br"),t._v("\n              "+t._s(t.$nuxt.$fire.auth.currentUser.email)+"\n            ")]),t._v("\n             \n            "),e("v-icon",[t._v("mdi-account-circle-outline")])],1)],1)],1),t._v(" "),e("v-container",{staticClass:"d-block menu-items"},[e("div",{staticClass:"d-flex flex-column"},[e("div",{staticClass:"d-flex"},[e("br")]),t._v(" "),e("div",{staticClass:"d-flex"},[e("nuxt-link",{attrs:{to:"/"}},[e("v-icon",[t._v("mdi-view-dashboard-variant-outline")]),t._v("  "),e("b",[t._v("My Boards")])],1)],1),t._v(" "),e("div",{staticClass:"d-flex"},[e("nuxt-link",{attrs:{to:"/auth/signout"}},[e("v-icon",[t._v("mdi-exit-to-app")]),t._v("  "),e("b",[t._v("Sign out")])],1)],1)])])],1)],1),t._v(" "),e("h1",[t._v(t._s(t.board.title))]),t._v(" "),e("small",[t._v("created "+t._s(t._f("formatDate")(t.board.dateCreated)))]),t._v(" "),e("div",{staticClass:"d-flex flex-row pr-6 pt-3"},[t._l(t.board.lists,(function(r){return e("div",{key:r.id,staticClass:"d-flex flex-column pt-3 mr-6 list",on:{drop:function(e){return t.drop(e,r.id)},dragover:function(r){return t.allowDrop(r)}}},[e("div",{staticClass:"d-flex flex-row justify-space-between"},[e("h4",[t._v(t._s(r.title))]),t._v(" "),e("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteList(r.id)}}},[t._v("mdi-delete-outline")])],1),t._v(" "),t._l(r.cards,(function(r){return e("v-card",{key:r.id,staticClass:"mt-5",attrs:{draggable:!0},on:{dragover:function(t){t.preventDefault()},dragstart:function(e){return t.drag(e,r)},click:function(e){return t.editCard(r)}}},[e("v-card-text",[t._v(" "+t._s(r.title)+" ")])],1)})),t._v(" "),e("v-btn",{staticClass:"mt-auto",attrs:{depressed:""},on:{click:function(e){t.dialogCard=!0,t.listId=r.id}}},[t._v("Add card")])],2)})),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialogCard,callback:function(r){t.dialogCard=r},expression:"dialogCard"}},[e("v-card",{attrs:{elevation:"0"}},[e("v-card-title",[e("span",{staticClass:"headline"},[t._v("Card name")])]),t._v(" "),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Stuff to do",required:""},model:{value:t.card.title,callback:function(r){t.$set(t.card,"title",r)},expression:"card.title"}})],1)],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(r){t.dialogCard=!1}}},[t._v("\n            Close\n          ")]),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(r){return t.createCard()}}},[t._v("\n            Save\n          ")])],1)],1)],1),t._v(" "),e("div",{staticClass:"d-flex flex-row"},[e("v-btn",{staticClass:"create-list",attrs:{depressed:""},on:{click:function(r){t.dialog=!0}}},[t._v("Create new list")]),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(r){t.dialog=r},expression:"dialog"}},[e("v-card",{attrs:{elevation:"0"}},[e("v-card-title",[e("span",{staticClass:"headline"},[t._v("List name")])]),t._v(" "),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Stuff to do",required:""},model:{value:t.list.title,callback:function(r){t.$set(t.list,"title",r)},expression:"list.title"}})],1)],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(r){t.dialog=!1}}},[t._v("\n              Close\n            ")]),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(r){return t.createList()}}},[t._v("\n              Save\n            ")])],1)],1)],1)],1),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialogEditCard,callback:function(r){t.dialogEditCard=r},expression:"dialogEditCard"}},[e("v-card",{attrs:{elevation:"0"}},[e("v-card-title",[e("span",{staticClass:"headline"},[t._v(t._s(t.currentCard.title))])]),t._v(" "),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Edit title",required:""},model:{value:t.currentCard.title,callback:function(r){t.$set(t.currentCard,"title",r)},expression:"currentCard.title"}})],1)],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(r){return t.deleteCard()}}},[t._v("\n            Delete\n          ")]),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(r){t.dialogEditCard=!1}}},[t._v("\n            Close\n          ")]),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(r){return t.updateCard()}}},[t._v("\n            Save\n          ")])],1)],1)],1)],2)])}),[],!1,null,"68244831",null);r.default=component.exports;x()(component,{VBtn:m.a,VCard:h.a,VCardActions:C.a,VCardText:C.c,VCardTitle:C.d,VCol:_.a,VContainer:w.a,VDialog:k.a,VIcon:y.a,VNavigationDrawer:j.a,VRow:$.a,VSpacer:I,VTextField:O.a})}}]);